(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{347:function(_,v,t){"use strict";t.r(v);var s=t(0),a=Object(s.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[_._v("提示")]),_._v(" "),v("p",[_._v("阿里云性能测试服务(PTS)。")])]),_._v(" "),v("h4",{attrs:{id:"_1-1-1-硬件环境"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-硬件环境"}},[_._v("#")]),_._v(" 1.1.1 硬件环境")]),_._v(" "),v("ul",[v("li",[_._v("linux 服务器 1台")])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("服务器信息")]),_._v(" "),v("th",[_._v("参数")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("CPU")]),_._v(" "),v("td",[_._v("8核")])]),_._v(" "),v("tr",[v("td",[_._v("内存")]),_._v(" "),v("td",[_._v("16G")])]),_._v(" "),v("tr",[v("td",[_._v("Mysql")]),_._v(" "),v("td",[_._v("RDS云数据库(最大链接3000)")])]),_._v(" "),v("tr",[v("td",[_._v("Redis")]),_._v(" "),v("td",[_._v("Redis云数据库(16G16G主从版最大连接数：10000)")])])])]),_._v(" "),v("h4",{attrs:{id:"_1-1-2软件环境"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2软件环境"}},[_._v("#")]),_._v(" 1.1.2软件环境")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("服务器信息")]),_._v(" "),v("th",[_._v("参数")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("操作系统")]),_._v(" "),v("td",[_._v("系统CentOS7.4 【64位】")])])])]),_._v(" "),v("h3",{attrs:{id:"_1-2测试工具"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-2测试工具"}},[_._v("#")]),_._v(" 1.2测试工具")]),_._v(" "),v("ul",[v("li",[_._v("阿里云性能测试服务(PTS)")])]),_._v(" "),v("h2",{attrs:{id:"_2-名词解释及测试结果"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-名词解释及测试结果"}},[_._v("#")]),_._v(" 2.名词解释及测试结果")]),_._v(" "),v("h3",{attrs:{id:"_2-1名词解释"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-1名词解释"}},[_._v("#")]),_._v(" 2.1名词解释")]),_._v(" "),v("ul",[v("li",[_._v("数据库会员数:应用注册用户数。")]),_._v(" "),v("li",[_._v("在线会员数:有登陆应用的会员。")]),_._v(" "),v("li",[_._v("并发数:登陆的会员，且同时在操作的会员。")]),_._v(" "),v("li",[_._v("经大量数据测算:数据库会员数:在线会员数:并发数在豹牙直播中，这3者的比例关系为100:20:1;")]),_._v(" "),v("li",[_._v("反过来说:1个并发数，可以支持20个会员在线，有100个注册会员。")])]),_._v(" "),v("h3",{attrs:{id:"_2-2测试结果"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-2测试结果"}},[_._v("#")]),_._v(" 2.2测试结果")]),_._v(" "),v("h4",{attrs:{id:"_2-2-1获取热门列表"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1获取热门列表"}},[_._v("#")]),_._v(" 2.2.1获取热门列表")]),_._v(" "),v("ul",[v("li",[_._v("用户去看直播，获取直播列表接口是压测重点。")])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("版本")]),_._v(" "),v("th",[_._v("串11链路 "),v("br"),_._v("起始/最大并发")]),_._v(" "),v("th",[_._v("API 名称")]),_._v(" "),v("th",[_._v("总请求数")]),_._v(" "),v("th",[_._v("平均TPS")]),_._v(" "),v("th",[_._v("请求成功率")]),_._v(" "),v("th",[_._v("平均响应时长")]),_._v(" "),v("th",[_._v("最大并发数")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("php版本")]),_._v(" "),v("td",[_._v("200/2000")]),_._v(" "),v("td",[_._v("获取热门列表")]),_._v(" "),v("td",[_._v("780000")]),_._v(" "),v("td",[_._v("1604.21")]),_._v(" "),v("td",[_._v("100%（753021/0）")]),_._v(" "),v("td",[_._v("700ms")]),_._v(" "),v("td",[_._v("2000")])]),_._v(" "),v("tr",[v("td",[_._v("golang版本")]),_._v(" "),v("td",[_._v("200/2000")]),_._v(" "),v("td",[_._v("获取热门列表")]),_._v(" "),v("td",[_._v("780000")]),_._v(" "),v("td",[_._v("待测")]),_._v(" "),v("td",[_._v("待测")]),_._v(" "),v("td",[_._v("待测")]),_._v(" "),v("td",[_._v("待测")])])])]),_._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[_._v("注意")]),_._v(" "),v("ul",[v("li",[_._v("最大并发数 2000  此时服务器cup使用率约20%")]),_._v(" "),v("li",[_._v("服务器的内存消耗比较少，约8.08%")]),_._v(" "),v("li",[_._v("云数据库的cup使用率0.24%，内存使用率6.8%")]),_._v(" "),v("li",[_._v("云Redis占用链数81")])])]),_._v(" "),v("h4",{attrs:{id:"_2-2-2进入直播间"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2进入直播间"}},[_._v("#")]),_._v(" 2.2.2进入直播间")]),_._v(" "),v("ul",[v("li",[_._v("用户进直播间观看时，进直播间接口是压测重点")])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("版本")]),_._v(" "),v("th",[_._v("串11链路 "),v("br"),_._v("起始/最大并发")]),_._v(" "),v("th",[_._v("API 名称")]),_._v(" "),v("th",[_._v("总请求数")]),_._v(" "),v("th",[_._v("平均TPS")]),_._v(" "),v("th",[_._v("请求成功率")]),_._v(" "),v("th",[_._v("平均响应时长")]),_._v(" "),v("th",[_._v("最大并发数")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("php版本")]),_._v(" "),v("td",[_._v("200/2000")]),_._v(" "),v("td",[_._v("进入直播间")]),_._v(" "),v("td",[_._v("908926")]),_._v(" "),v("td",[_._v("2471.41")]),_._v(" "),v("td",[_._v("100%（908926/0）")]),_._v(" "),v("td",[_._v("446ms")]),_._v(" "),v("td",[_._v("2000")])]),_._v(" "),v("tr",[v("td",[_._v("golang版本")]),_._v(" "),v("td",[_._v("200/2000")]),_._v(" "),v("td",[_._v("进入直播间")]),_._v(" "),v("td",[_._v("71288")]),_._v(" "),v("td",[_._v("待测")]),_._v(" "),v("td",[_._v("待测")]),_._v(" "),v("td",[_._v("待测")]),_._v(" "),v("td",[_._v("待测")])])])]),_._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[_._v("注意")]),_._v(" "),v("ul",[v("li",[_._v("最大并发数 2000  此时服务器cup使用率约81%")]),_._v(" "),v("li",[_._v("服务器的内存消耗比较少，约8.31%")]),_._v(" "),v("li",[_._v("云数据库的cup使用率66.24%，内存使用率7%")]),_._v(" "),v("li",[_._v("云Redis占用链数81")])])]),_._v(" "),v("h4",{attrs:{id:"_2-2-3送礼"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3送礼"}},[_._v("#")]),_._v(" 2.2.3送礼")]),_._v(" "),v("ul",[v("li",[_._v("用户进入直播间，送礼物的接口是压测重点。")])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("版本")]),_._v(" "),v("th",[_._v("串11链路 "),v("br"),_._v("起始/最大并发")]),_._v(" "),v("th",[_._v("API 名称")]),_._v(" "),v("th",[_._v("总请求数")]),_._v(" "),v("th",[_._v("平均TPS")]),_._v(" "),v("th",[_._v("请求成功率")]),_._v(" "),v("th",[_._v("平均响应时长")]),_._v(" "),v("th",[_._v("最大并发数")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("php版本")]),_._v(" "),v("td",[_._v("200/2000")]),_._v(" "),v("td",[_._v("送礼")]),_._v(" "),v("td",[_._v("1895659")]),_._v(" "),v("td",[_._v("5251.88")]),_._v(" "),v("td",[_._v("100%（1895659/0）")]),_._v(" "),v("td",[_._v("213ms")]),_._v(" "),v("td",[_._v("2000")])]),_._v(" "),v("tr",[v("td",[_._v("golang版本")]),_._v(" "),v("td",[_._v("200/2000")]),_._v(" "),v("td",[_._v("送礼")]),_._v(" "),v("td"),_._v(" "),v("td",[_._v("待测")]),_._v(" "),v("td",[_._v("待测")]),_._v(" "),v("td",[_._v("待测")]),_._v(" "),v("td",[_._v("待测")])])])]),_._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[_._v("注意")]),_._v(" "),v("ul",[v("li",[_._v("最大并发数 2000  此时服务器cup使用率约85.17%")]),_._v(" "),v("li",[_._v("服务器的内存消耗比较少，约8.53%")]),_._v(" "),v("li",[_._v("云数据库的cup使用率29.12%，内存使用率7.1%")]),_._v(" "),v("li",[_._v("云Redis占用链数81")])])]),_._v(" "),v("h4",{attrs:{id:"_2-2-4数据统计分析"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-4数据统计分析"}},[_._v("#")]),_._v(" 2.2.4数据统计分析")]),_._v(" "),v("ul",[v("li",[_._v("一台8核16G的服务器大概能满足2000-3000的并发.如果想要加大并发,")]),_._v(" "),v("li",[_._v("需要提升带宽和CPU的数量.经过大量数据测算,在豹牙直播中，")]),_._v(" "),v("li",[_._v("数据库会员数:在线会员数:并发数比例关系为100:20:1;反过来说:1个并发数，可以支持20个会员在线，有100个注册会员。")])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("测试对象")]),_._v(" "),v("th",[_._v("并发数")]),_._v(" "),v("th",[_._v("在线会员")]),_._v(" "),v("th",[_._v("会员数")]),_._v(" "),v("th",[_._v("限制原因")]),_._v(" "),v("th",[_._v("解决方案")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("php版本")]),_._v(" "),v("td",[_._v("2000")]),_._v(" "),v("td",[_._v("40000")]),_._v(" "),v("td",[_._v("200000")]),_._v(" "),v("td",[_._v("cpu接近85%")]),_._v(" "),v("td",[_._v("k8s+集群+弹性扩容")])])])]),_._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[_._v("注意")]),_._v(" "),v("p",[_._v("⨳ 有人问:我想在直播平台上实现10w用户在线，需要几台服务器?")]),_._v(" "),v("ul",[v("li",[_._v("如果按一台8核*16G的ECS，2500并发来测算的话:")]),_._v(" "),v("li",[_._v("100000/20/2500=2台ECS;同时需要配套8核16G级别的连接的redis,mysql来支撑。")])]),_._v(" "),v("p",[_._v("⨳ 有人问:性能不够，该如何做?")]),_._v(" "),v("ul",[v("li",[_._v("采用golang微服务架构，搭配k8s+集群方案。IM采用B站开源的架构，如弹幕，消息等，轻松抗住。实测单机3.5W的QPS。")]),_._v(" "),v("li",[_._v("如有疑问可以加V详聊 BCFind5。")])])])])}),[],!1,null,null,null);v.default=a.exports}}]);